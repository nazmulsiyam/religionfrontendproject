import{c as ce,a as b,t as k}from"../chunks/CYOvTfIo.js";import{i as Me}from"../chunks/CKPaN40w.js";import{H as Re,p as Te,I as Ue,J as ze,o as oe,q as je,s as r,w as a,v as o,K as ye,b as f,g,L as xe,t as we,M as ke,N as Be}from"../chunks/Csq6swwR.js";import{l as Ge,r as Ae,e as x,s as Ee}from"../chunks/Bt46gHeY.js";import{i as Qe,p as $e,a as O,s as Ce,b as w,c as Ve,d as J}from"../chunks/I9CK69oH.js";import{r as ve,b as se,a as We,t as L,T as Xe,e as Ze,i as et}from"../chunks/Bt9QVXkI.js";import{w as _,o as tt}from"../chunks/kz9TlXHQ.js";import{g as De}from"../chunks/DIpO6vVA.js";function Ne(t,d,l){if(t.multiple)return ot(t,d);for(var v of t.options){var s=Q(v);if(Qe(s,d)){v.selected=!0;return}}(!l||d!==void 0)&&(t.selectedIndex=-1)}function at(t,d){Re(()=>{var l=new MutationObserver(()=>{var v=t.__value;Ne(t,v)});return l.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function rt(t,d,l=d){var v=!0;Ge(t,"change",s=>{var n=s?"[selected]":":checked",M;if(t.multiple)M=[].map.call(t.querySelectorAll(n),Q);else{var N=t.querySelector(n)??t.querySelector("option:not([disabled])");M=N&&Q(N)}l(M)}),Re(()=>{var s=d();if(Ne(t,s,v),v&&s===void 0){var n=t.querySelector(":checked");n!==null&&(s=Q(n),l(s))}t.__value=s,v=!1}),at(t)}function ot(t,d){for(var l of t.options)l.selected=~d.indexOf(Q(l))}function Q(t){return"__value"in t?t.__value:t.value}function st(t){return function(...d){var l=d[0];return l.preventDefault(),t==null?void 0:t.apply(this,d)}}var lt=k('<div class="modal svelte-1yalw82"><div class="modal-content svelte-1yalw82"><h2 class="text-xl font-bold mb-4">Edit Religion</h2> <form><div class="mb-4"><label class="block text-gray-700">Name</label> <input type="text" class="w-full p-2 border border-gray-300 rounded" required></div> <div class="mb-4"><label class="block text-gray-700">Description</label> <textarea class="w-full p-2 border border-gray-300 rounded" required></textarea></div> <div class="mb-4"><label class="block text-gray-700">Active</label> <input type="checkbox" class="mr-2"> <span class="text-gray-700">Is Active</span></div> <div class="flex justify-end"><button type="button" class="bg-gray-300 text-black px-4 py-2 rounded mr-2">Cancel</button> <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Save</button></div></form></div></div>');function it(t,d){Te(d,!1);const[l,v]=Ce(),s=()=>w(N(),"$religionToEdit",l),n=()=>w(R,"$editedReligion",l),M=()=>w(Y(),"$showModal",l);let N=$e(d,"religionToEdit",24,()=>_(null)),Y=$e(d,"showModal",24,()=>_(!1)),R=_({name:"",description:"",isActive:!0});const T=async()=>{const h=s();try{const u=await fetch(`https://projectasthaapi.vercel.app/api/v1/religion/${h._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n())});if(!u.ok)throw new Error("Failed to update religion");const $=await u.json();L.success("Religion updated successfully!"),Y().set(!1)}catch(u){console.error("Error updating religion:",u),L.error("Failed to update religion!")}},V=()=>{Y().set(!1)};Ue(()=>s(),()=>{Ve(R,s()?{...s()}:{name:"",description:"",isActive:!0})}),ze(),Me();var E=ce(),q=oe(E);{var W=h=>{var u=lt(),$=r(u),P=a(r($),2),H=r(P),X=a(r(H),2);ve(X),o(H);var K=a(H,2),Z=a(r(K),2);Ae(Z),o(K);var U=a(K,2),ee=a(r(U),2);ve(ee),ye(2),o(U);var te=a(U,2),ae=r(te);ye(2),o(te),o(P),o($),o(u),se(X,()=>n().name,D=>J(R,f(n).name=D,f(n))),se(Z,()=>n().description,D=>J(R,f(n).description=D,f(n))),We(ee,()=>n().isActive,D=>J(R,f(n).isActive=D,f(n))),x("click",ae,V),x("submit",P,st(T)),b(h,u)};O(q,h=>{M()&&h(W)})}b(t,E),je(),v()}var nt=k('<tr><td class="p-2 border text-center" colspan="4">Loading...</td></tr>'),dt=k('<tr><td class="p-2 border text-center" colspan="4">No data found</td></tr>'),ct=k('<span class="text-green-600">Yes</span>'),vt=k('<span class="text-red-600">No</span>'),ut=k('<tr class="hover:bg-gray-50"><td class="p-2 border"> </td><td class="p-2 border"> </td><td class="p-2 border text-center"><!></td><td class="p-2 border text-center"><button class="bg-blue-500 text-white px-3 py-1 rounded mr-2">Cast</button> <button class="bg-yellow-500 text-white px-3 py-1 rounded mr-2">Edit</button> <button class="bg-red-500 text-white px-3 py-1 rounded mr-2">Delete</button></td></tr>'),pt=k('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"><div class="bg-white p-6 rounded shadow-lg w-1/3"><h2 class="text-xl font-bold mb-4">Create New Religion</h2> <label class="block mb-2">Name: <input type="text" class="block w-full border p-2 rounded" required></label> <label class="block mb-2">Description: <textarea class="block w-full border p-2 rounded" required></textarea></label> <label class="block mb-4">Is Active: <select class="block w-full border p-2 rounded"><option>Yes</option><option>No</option></select></label> <div class="flex justify-end space-x-2"><button class="bg-gray-300 px-4 py-2 rounded">Cancel</button> <button class="bg-blue-500 text-white px-4 py-2 rounded">Save</button></div></div></div>'),bt=k('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"><div class="bg-white p-6 rounded shadow-lg w-1/3"><h2 class="text-xl font-bold mb-4">Are you sure you want to delete?</h2> <div class="flex justify-end space-x-2"><button class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400">No</button> <button class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">Yes</button></div></div></div>'),ft=k('<!> <div class="container mx-auto p-4"><!> <h1 class="text-2xl font-bold mb-4">Religions</h1> <div class="flex justify-end mb-2"><button class="bg-green-500 text-white cursor-pointer px-4 py-2 rounded">Create +</button></div> <div class="overflow-x-auto"><table class="table-auto w-full border border-gray-200"><thead><tr class="bg-gray-100 text-left"><th class="p-2 border">Name</th><th class="p-2 border">Description</th><th class="p-2 border">Is Active</th><th class="p-2 border">Actions</th></tr></thead><tbody><!></tbody></table></div></div> <!> <!>',1);function Et(t,d){Te(d,!1);const[l,v]=Ce(),s=()=>w(h,"$newReligion",l),n=()=>w(T,"$religions",l),M=()=>w(W,"$religionToDelete",l),N=()=>w(V,"$loading",l),Y=()=>w(E,"$showCreateModal",l),R=()=>w($,"$showDeleteModal",l);let T=_([]),V=_(!0),E=_(!1),q=ke(_(!1)),W=_(null),h=_({name:"",description:"",isActive:!0}),u=ke(_(null)),$=_(!1);const P=async()=>{try{const e=await fetch("https://projectasthaapi.vercel.app/api/v1/religion");if(!e.ok)throw new Error("Failed to fetch data");const i=await e.json();T.set(i)}catch(e){console.error("Error fetching religions:",e),T.set([])}finally{V.set(!1)}};tt(()=>{P()});const H=()=>{E.set(!0),g(q).set(!1)},X=async()=>{try{const e=await fetch("https://projectasthaapi.vercel.app/api/v1/religion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s())});if(!e.ok)throw new Error("Failed to create religion");const i=await e.json();T.update(c=>[...c,i]),L.success("Religion created successfully!"),De(window.location.pathname),E.set(!1)}catch(e){console.error("Error saving religion:",e),L.error("Failed to create religion!")}},K=e=>{De(`/cast/${e}`)},Z=e=>{const i=n().find(c=>c._id===e);i?(g(u).set(i),E.set(!1),g(q).set(!0)):console.error("Religion not found")},U=e=>{W.set(e),$.set(!0)},ee=async()=>{const e=M();try{if(!(await fetch(`https://projectasthaapi.vercel.app/api/v1/religion/${e._id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete religion");T.update(c=>c.filter(m=>m._id!==e._id)),L.success("Religion deleted successfully!"),$.set(!1)}catch(i){console.error("Error deleting religion:",i),L.error("Failed to delete religion!")}},te=()=>{$.set(!1)};Me();var ae=ft(),D=oe(ae);it(D,{get religionToEdit(){return g(u)},set religionToEdit(e){xe(u,e)},get showModal(){return g(q)},set showModal(e){xe(q,e)},$$legacy:!0});var le=a(D,2),ue=r(le);Xe(ue,{});var ie=a(ue,4),qe=r(ie);o(ie);var pe=a(ie,2),be=r(pe),fe=a(r(be)),Se=r(fe);{var Fe=e=>{var i=nt();b(e,i)},Ie=e=>{var i=ce(),c=oe(i);{var m=p=>{var A=dt();b(p,A)},j=p=>{var A=ce(),z=oe(A);Ze(z,1,n,et,(B,y)=>{var S=ut(),F=r(S),re=r(F,!0);o(F);var G=a(F),C=r(G,!0);o(G);var ne=a(G),Ye=r(ne);{var Pe=I=>{var de=ct();b(I,de)},He=I=>{var de=vt();b(I,de)};O(Ye,I=>{g(y).isActive?I(Pe):I(He,!1)})}o(ne);var _e=a(ne),he=r(_e),me=a(he,2),Ke=a(me,2);o(_e),o(S),we(()=>{Ee(re,g(y).name),Ee(C,g(y).description)}),x("click",he,()=>K(g(y)._id)),x("click",me,()=>Z(g(y)._id)),x("click",Ke,()=>U(g(y))),b(B,S)}),b(p,A)};O(c,p=>{n().length===0?p(m):p(j,!1)},!0)}b(e,i)};O(Se,e=>{N()?e(Fe):e(Ie,!1)})}o(fe),o(be),o(pe),o(le);var ge=a(le,2);{var Oe=e=>{var i=pt(),c=r(i),m=a(r(c),2),j=a(r(m));ve(j),o(m);var p=a(m,2),A=a(r(p));Ae(A),o(p);var z=a(p,2),B=a(r(z));we(()=>{s(),Be(()=>{})});var y=r(B);y.value=(y.__value=!0)==null?"":!0;var S=a(y);S.value=(S.__value=!1)==null?"":!1,o(B),o(z);var F=a(z,2),re=r(F),G=a(re,2);o(F),o(c),o(i),se(j,()=>s().name,C=>J(h,f(s).name=C,f(s))),se(A,()=>s().description,C=>J(h,f(s).description=C,f(s))),rt(B,()=>s().isActive,C=>J(h,f(s).isActive=C,f(s))),x("click",re,()=>E.set(!1)),x("click",G,X),b(e,i)};O(ge,e=>{Y()&&e(Oe)})}var Le=a(ge,2);{var Je=e=>{var i=bt(),c=r(i),m=a(r(c),2),j=r(m),p=a(j,2);o(m),o(c),o(i),x("click",j,te),x("click",p,ee),b(e,i)};O(Le,e=>{R()&&e(Je)})}x("click",qe,H),b(t,ae),je(),v()}export{Et as component};
